# Sampling traces

#### https://opentelemetry.io/docs/concepts/sampling/

In OpenTelemetry, sampling refers to the process of determining which spans should be recorded and sent to the backend for further analysis. Sampling is a crucial aspect of distributed tracing systems because it helps manage the volume of telemetry data generated by applications.

### Create customSampler.ts file
```
import { Attributes, Context, Link, SpanKind } from "@opentelemetry/api";
import { PrometheusExporter } from "@opentelemetry/exporter-prometheus";
import { Sampler, SamplingResult, SamplingDecision } from "@opentelemetry/sdk-trace-base";
import { SemanticAttributes } from '@opentelemetry/semantic-conventions';
const { endpoint } = PrometheusExporter.DEFAULT_OPTIONS;

export class CustomSampler implements Sampler {
    shouldSample(context: Context, traceId: string, spanName: string, spanKind: SpanKind, attributes: Attributes, links: Link[]): SamplingResult {
        if(attributes[SemanticAttributes.HTTP_TARGET] === endpoint){
            return {
                decision:SamplingDecision.NOT_RECORD
            }
        }

        return {
            decision:SamplingDecision.RECORD_AND_SAMPLED
        }
    }
}
```

Add the following code to the NodeSDK object

```
// [...]

import { CustomSampler } from './customSampler';

sampler: new ParentBasedSampler({
    root: new CustomSampler()
}),
```


